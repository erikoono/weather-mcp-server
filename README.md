# å¤©æ°—æƒ…å ±APIã‚µãƒ¼ãƒãƒ¼

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€OpenWeatherMap APIã‚’ä½¿ç”¨ã—ã¦å¤©æ°—æƒ…å ±ã‚’æä¾›ã™ã‚‹RESTful APIã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚ä¸–ç•Œä¸­ã®éƒ½å¸‚ã®ç¾åœ¨ã®å¤©æ°—æƒ…å ±ã¨å¤©æ°—äºˆå ±ã‚’å–å¾—ã§ãã¾ã™ã€‚

## æ©Ÿèƒ½

- ğŸŒ¤ï¸ ç¾åœ¨ã®å¤©æ°—æƒ…å ±ã®å–å¾—
- ğŸŒ¡ï¸ æ°—æ¸©ã€ä½“æ„Ÿæ¸©åº¦ã€æ¹¿åº¦ã€é¢¨é€Ÿãªã©ã®è©³ç´°æƒ…å ±
- ğŸŒ ä¸–ç•Œä¸­ã®éƒ½å¸‚ã«å¯¾å¿œ
- ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªã§ã®å¤©æ°—èª¬æ˜
- ğŸ“Š JSONå½¢å¼ã§ã®ãƒ‡ãƒ¼ã‚¿æä¾›
- ğŸ”® 5æ—¥é–“ã®å¤©æ°—äºˆå ±

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€OpenWeatherMap APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š

```bash
cp env.example .env
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€OpenWeatherMap APIã‚­ãƒ¼ã‚’è¨­å®šï¼š

```
OPENWEATHER_API_KEY=your_api_key_here
```

### 3. OpenWeatherMap APIã‚­ãƒ¼ã®å–å¾—

1. [OpenWeatherMap](https://openweathermap.org/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ
3. APIã‚­ãƒ¼ã‚’å–å¾—
4. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®š

### 4. ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

### 5. å®Ÿè¡Œ

```bash
npm start
```

é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã™ã‚‹å ´åˆï¼š

```bash
npm run dev
```

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ã‚µãƒ¼ãƒãƒ¼æƒ…å ±

```
GET /
```

ã‚µãƒ¼ãƒãƒ¼ã®åŸºæœ¬æƒ…å ±ã¨åˆ©ç”¨å¯èƒ½ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

### ç¾åœ¨ã®å¤©æ°—æƒ…å ±

```
GET /weather/:city
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `city` (å¿…é ˆ): éƒ½å¸‚åï¼ˆä¾‹: Tokyo, Osaka, Kyotoï¼‰
- `country` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): å›½ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: JP, US, UKã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: JPï¼‰

**ä¾‹:**
```bash
curl http://localhost:3000/weather/Tokyo
curl http://localhost:3000/weather/New%20York?country=US
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "data": {
    "temperature": 22,
    "feelsLike": 24,
    "humidity": 65,
    "windSpeed": 3.2,
    "description": "æ›‡ã‚Š",
    "visibility": 10,
    "pressure": 1013,
    "city": "Tokyo",
    "country": "JP",
    "timestamp": "2024-01-15T10:30:00.000Z"
  }
}
```

### å¤©æ°—äºˆå ±

```
GET /weather/:city/forecast
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `city` (å¿…é ˆ): éƒ½å¸‚å
- `country` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): å›½ã‚³ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: JPï¼‰
- `days` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): äºˆå ±æ—¥æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 5ã€æœ€å¤§: 5ï¼‰

**ä¾‹:**
```bash
curl http://localhost:3000/weather/Tokyo/forecast
curl http://localhost:3000/weather/Osaka/forecast?days=3
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "data": [
    {
      "temperature": 22,
      "feelsLike": 24,
      "humidity": 65,
      "windSpeed": 3.2,
      "description": "æ›‡ã‚Š",
      "visibility": 10,
      "pressure": 1013,
      "city": "Tokyo",
      "country": "JP",
      "timestamp": "2024-01-15T00:00:00.000Z"
    }
    // ... ä»–ã®æ—¥ä»˜ã®ãƒ‡ãƒ¼ã‚¿
  ]
}
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
weather-mcp-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ weather.ts        # å¤©æ°—æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ env.example
â””â”€â”€ README.md
```

## é–‹ç™º

### ä¾å­˜é–¢ä¿‚

- `express` - Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `cors` - CORSãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- `axios` - HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `dotenv` - ç’°å¢ƒå¤‰æ•°ç®¡ç†
- `typescript` - TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

- `npm run build` - TypeScriptã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- `npm start` - ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œ
- `npm run dev` - é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
- `npm test` - ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

APIã¯ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ï¼š

```json
{
  "success": false,
  "error": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
}
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ã‚¤ã‚·ãƒ¥ãƒ¼ã®å ±å‘Šã‚’æ­“è¿ã—ã¾ã™ï¼ 