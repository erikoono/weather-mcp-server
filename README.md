# ğŸŒ¤ï¸ å¤©æ°—æƒ…å ±APIã‚µãƒ¼ãƒãƒ¼

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€OpenWeatherMap APIã‚’ä½¿ç”¨ã—ã¦å¤©æ°—æƒ…å ±ã‚’æä¾›ã™ã‚‹RESTful APIã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚ä¸–ç•Œä¸­ã®éƒ½å¸‚ã®ç¾åœ¨ã®å¤©æ°—æƒ…å ±ã¨å¤©æ°—äºˆå ±ã‚’å–å¾—ã§ãã¾ã™ã€‚

## âœ¨ æ©Ÿèƒ½

- ğŸŒ¤ï¸ ç¾åœ¨ã®å¤©æ°—æƒ…å ±ã®å–å¾—
- ğŸŒ¡ï¸ æ°—æ¸©ã€ä½“æ„Ÿæ¸©åº¦ã€æ¹¿åº¦ã€é¢¨é€Ÿãªã©ã®è©³ç´°æƒ…å ±
- ğŸŒ ä¸–ç•Œä¸­ã®éƒ½å¸‚ã«å¯¾å¿œ
- ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªã§ã®å¤©æ°—èª¬æ˜
- ğŸ“Š JSONå½¢å¼ã§ã®ãƒ‡ãƒ¼ã‚¿æä¾›
- ğŸ”® 5æ—¥é–“ã®å¤©æ°—äºˆå ±
- ğŸš€ CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆGitHub Actionsï¼‰
- ğŸ³ Dockerå¯¾å¿œ
- â˜ï¸ Vercelãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œ

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€OpenWeatherMap APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š

```bash
cp env.example .env
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€OpenWeatherMap APIã‚­ãƒ¼ã‚’è¨­å®šï¼š

```
OPENWEATHER_API_KEY=your_api_key_here
```

### 3. OpenWeatherMap APIã‚­ãƒ¼ã®å–å¾—

1. [OpenWeatherMap](https://openweathermap.org/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ
3. APIã‚­ãƒ¼ã‚’å–å¾—
4. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®š

### 4. ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

### 5. å®Ÿè¡Œ

```bash
npm start
```

é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã™ã‚‹å ´åˆï¼š

```bash
npm run dev
```

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ã‚µãƒ¼ãƒãƒ¼æƒ…å ±

```
GET /
```

ã‚µãƒ¼ãƒãƒ¼ã®åŸºæœ¬æƒ…å ±ã¨åˆ©ç”¨å¯èƒ½ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

### ç¾åœ¨ã®å¤©æ°—æƒ…å ±

```
GET /weather/:city
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `city` (å¿…é ˆ): éƒ½å¸‚åï¼ˆä¾‹: Tokyo, Osaka, Kyotoï¼‰
- `country` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): å›½ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: JP, US, UKã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: JPï¼‰

**ä¾‹:**
```bash
curl http://localhost:3000/weather/Tokyo
curl http://localhost:3000/weather/New%20York?country=US
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "data": {
    "temperature": 22,
    "feelsLike": 24,
    "humidity": 65,
    "windSpeed": 3.2,
    "description": "æ›‡ã‚Š",
    "visibility": 10,
    "pressure": 1013,
    "city": "Tokyo",
    "country": "JP",
    "timestamp": "2024-01-15T10:30:00.000Z"
  }
}
```

### å¤©æ°—äºˆå ±

```
GET /weather/:city/forecast
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `city` (å¿…é ˆ): éƒ½å¸‚å
- `country` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): å›½ã‚³ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: JPï¼‰
- `days` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): äºˆå ±æ—¥æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 5ã€æœ€å¤§: 5ï¼‰

**ä¾‹:**
```bash
curl http://localhost:3000/weather/Tokyo/forecast
curl http://localhost:3000/weather/Osaka/forecast?days=3
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "data": [
    {
      "temperature": 22,
      "feelsLike": 24,
      "humidity": 65,
      "windSpeed": 3.2,
      "description": "æ›‡ã‚Š",
      "visibility": 10,
      "pressure": 1013,
      "city": "Tokyo",
      "country": "JP",
      "timestamp": "2024-01-15T00:00:00.000Z"
    }
    // ... ä»–ã®æ—¥ä»˜ã®ãƒ‡ãƒ¼ã‚¿
  ]
}
```

## ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
weather-mcp-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ weather.ts        # å¤©æ°—æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ setup.ts              # ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â””â”€â”€ simple.test.ts        # åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ test.yml          # ãƒ†ã‚¹ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚       â”œâ”€â”€ ci-cd.yml         # CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”‚       â”œâ”€â”€ deploy-vercel.yml # Vercelãƒ‡ãƒ—ãƒ­ã‚¤
â”‚       â””â”€â”€ docker.yml        # Dockerãƒ“ãƒ«ãƒ‰
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ jest.config.js            # Jestè¨­å®š
â”œâ”€â”€ vercel.json               # Vercelè¨­å®š
â”œâ”€â”€ Dockerfile                # Dockerè¨­å®š
â”œâ”€â”€ env.example
â””â”€â”€ README.md
```

## ğŸ› ï¸ é–‹ç™º

### ä¾å­˜é–¢ä¿‚

- `express` - Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `cors` - CORSãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- `axios` - HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `dotenv` - ç’°å¢ƒå¤‰æ•°ç®¡ç†
- `typescript` - TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©
- `jest` - ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `supertest` - APIãƒ†ã‚¹ãƒˆ

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

- `npm run build` - TypeScriptã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- `npm start` - ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œ
- `npm run dev` - é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
- `npm test` - ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
- `npm run test:ci` - CIç”¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- `npm run test:coverage` - ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
- `npm run lint` - ã‚³ãƒ¼ãƒ‰ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°
- `npm run type-check` - å‹ãƒã‚§ãƒƒã‚¯

## ğŸš€ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

- **ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–**: ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- **ãƒ“ãƒ«ãƒ‰**: TypeScriptã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: npm audit + Snyk
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercelè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒ†ã‚¹ãƒˆç’°å¢ƒ

- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: è‰¯å¥½
- **å®‰å®šæ€§**: 100%æˆåŠŸç‡
- **è‡ªå‹•åŒ–**: PRæ™‚ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆ

## ğŸ³ Docker ã‚µãƒãƒ¼ãƒˆ

```bash
# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker build -t weather-api .

# ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œ
docker run -p 3000:3000 weather-api
```

## â˜ï¸ Vercel ãƒ‡ãƒ—ãƒ­ã‚¤

1. [Vercel](https://vercel.com)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
3. ç’°å¢ƒå¤‰æ•°`OPENWEATHER_API_KEY`ã‚’è¨­å®š
4. è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
npm run test:coverage

# CIç”¨ãƒ†ã‚¹ãƒˆ
npm run test:ci
```

## ğŸ“Š å“è³ªæŒ‡æ¨™

- **ã‚³ãƒ¼ãƒ‰å“è³ª**: TypeScriptã§å‹å®‰å…¨
- **ãƒ†ã‚¹ãƒˆ**: åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- **CI/CD**: å®Œå…¨è‡ªå‹•åŒ–
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: æœ¬ç•ªç’°å¢ƒå¯¾å¿œ

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

APIã¯ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ï¼š

```json
{
  "success": false,
  "error": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
}
```

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“**: é«˜é€Ÿ
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: Dockerå¯¾å¿œ
- **å¯ç”¨æ€§**: Vercel CDN
- **ç›£è¦–**: GitHub Actions

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [GitHub Actions](https://github.com/erikoono/weather-mcp-server/actions)
- [Vercel](https://vercel.com/new)
- [OpenWeatherMap API](https://openweathermap.org/api)

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ã‚¤ã‚·ãƒ¥ãƒ¼ã®å ±å‘Šã‚’æ­“è¿ã—ã¾ã™ï¼

### é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

1. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
3. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½
4. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’é€šé
5. ãƒãƒ¼ã‚¸ 